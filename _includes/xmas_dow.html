

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
  });
</script>

<!-- <script type="text/javascript" src="/MathJax/MathJax.js?config=TeX-AMS_HTML-full"></script> -->
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML-full"> </script>
<style type="text/css">
  .input_hidden {
    display: none;
    //  margin-top: 5px;
  }
  .container {
    /*width:140%; //!important;*/
    width: none; //!important;
    border: none !important;
  }
  div.prompt {
    display: none;
  }
  .CodeMirror{
    /*font-family: "Consolas", sans-serif;*/
    font-size:18px;
    line-height: 30px;
  }
  pre, kbd, samp {
    /*font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;*/
    /*line-height: 30px;*/
    font-size:18px;
  }
  pre.code {
    font-family: Consolas, monospace;
    font-size: 12px;
  }*/
  /*p {
    font-size:20px;
    font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;
    line-height: 30px;
    text-align: left;
  }*/
  div.cell{
    max-width:100%;
    margin-left:auto;
    margin-right:auto;
  }
  div.text_cell_render{
    max-width:100%;
    margin-left:auto;
    margin-right:auto;
  }
  h2,h3,h4{
    text-align: left;
  }
  </style>

  <script>
  $(document).ready(function(){
    $(".output_wrapper").click(function(){
      $(this).prev('.input_hidden').slideToggle();
    });
  })
  </script>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After this year's Christmas being on a Sunday
rendered my normal holiday schedule completely disrupted (ok, perhaps negligibly inconvenienced would be more fitting), I wondered what the regularity or patterns of Sunday Christmases there might be. This is what I look for in this mini-post.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="kn">import</span> <span class="nn">calendar</span> <span class="k">as</span> <span class="nn">cal</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="k">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span><span class="p">,</span> <span class="n">DataFrame</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">notebook_repr_html</span> <span class="o">=</span> <span class="k">False</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following few lines give the date and day of week of all the Christmases in the 21st century:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">christmas</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">year</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>

<span class="n">ydf</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;Yr&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">2100</span><span class="p">)})</span>
<span class="n">ydf</span><span class="p">[</span><span class="s">&#39;Xmas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">ydf</span><span class="o">.</span><span class="n">Yr</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">christmas</span><span class="p">))</span>
<span class="n">ydf</span><span class="p">[</span><span class="s">&#39;Xmas_dow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydf</span><span class="o">.</span><span class="n">Xmas</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">&#39;%a&#39;</span><span class="p">)</span>
<span class="n">ydf</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[2]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>     Yr       Xmas Xmas_dow
0  2000 2000-12-25      Mon
1  2001 2001-12-25      Tue
2  2002 2002-12-25      Wed
3  2003 2003-12-25      Thu
4  2004 2004-12-25      Sat
5  2005 2005-12-25      Sun
6  2006 2006-12-25      Mon
7  2007 2007-12-25      Tue
8  2008 2008-12-25      Thu
9  2009 2009-12-25      Fri</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A simple rule of thumb we can see is that the day of week that Christmas falls on increases by one every year, except for leap years where it increases by 2 days.</p>
<p>The following block encodes something like Sunday epochs (<code>Sun_epoch</code>), where the count is only incremented on the years with a Christmas on a Sunday.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">ydf</span><span class="p">[</span><span class="s">&#39;Sunday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydf</span><span class="o">.</span><span class="n">Xmas_dow</span> <span class="o">==</span> <span class="s">&#39;Sun&#39;</span>
<span class="n">ydf</span><span class="p">[</span><span class="s">&#39;Sun_epoch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydf</span><span class="o">.</span><span class="n">Sunday</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">ydf</span><span class="p">[:</span><span class="mi">7</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[3]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>     Yr       Xmas Xmas_dow Sunday  Sun_epoch
0  2000 2000-12-25      Mon  False          0
1  2001 2001-12-25      Tue  False          0
2  2002 2002-12-25      Wed  False          0
3  2003 2003-12-25      Thu  False          0
4  2004 2004-12-25      Sat  False          0
5  2005 2005-12-25      Sun   True          1
6  2006 2006-12-25      Mon  False          1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This enables a quick summary of the intervals, showing a pattern where we'll typically have to wait 5 or 6 years for a Sunday, but occasionally have to wait up to 11 years:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">ydf</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;Sun_epoch &gt; 0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;Sun_epoch&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Yr</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s">&#39;size&#39;</span><span class="p">,</span> <span class="s">&#39;min&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[4]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>           size   min
Sun_epoch            
1             6  2005
2             5  2011
3             6  2016
4            11  2022
5             6  2033
6             5  2039
7             6  2044
8            11  2050
9             6  2061
10            5  2067
11            6  2072
12           11  2078
13            6  2089
14            5  2095</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It looks like 2016 began an epoch of Sunday-free Christmases that will last for 6 years, after which we'll have a dry spot of 11 years without the inconvenient Sunday Christmas.</p>
<p>A last thing I'm curious about is the regularity of Christmas occurring on a weekend, which is almost as undesirable for me:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">ydf</span><span class="p">[</span><span class="s">&#39;Weekend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydf</span><span class="o">.</span><span class="n">Xmas_dow</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s">&#39;Sat&#39;</span><span class="p">,</span> <span class="s">&#39;Sun&#39;</span><span class="p">])</span>
<span class="n">ydf</span><span class="p">[</span><span class="s">&#39;Wkd_epoch&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ydf</span><span class="o">.</span><span class="n">Weekend</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">ydf</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;Wkd_epoch &gt; 0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;Wkd_epoch&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">Yr</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s">&#39;size&#39;</span><span class="p">,</span> <span class="s">&#39;min&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[5]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>           size   min
Wkd_epoch            
1             1  2004
2             5  2005
3             1  2010
4             5  2011
5             5  2016
6             1  2021
7             5  2022
8             5  2027
9             1  2032
10            5  2033
11            1  2038
12            5  2039
13            5  2044
14            1  2049
15            5  2050
16            5  2055
17            1  2060
18            5  2061
19            1  2066
20            5  2067
21            5  2072
22            1  2077
23            5  2078
24            5  2083
25            1  2088
26            5  2089
27            1  2094
28            5  2095</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As expected, these occur much more frequently, and without the periodic 11-year respite.</p>

</div>
</div>
</div>